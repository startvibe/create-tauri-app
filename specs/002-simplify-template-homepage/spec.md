# Feature Specification: 简化模板首页

**Feature Branch**: `002-simplify-template-homepage`
**Created**: 2025-11-17
**Status**: Draft
**Input**: User description: "经验模板项目的页面，仅保留一个首页介绍项目，并提供主题切换、语言切换，亮/暗模式功能，其余页面和功能都删除。保留一个简介干净的模板项目，方便使用者直接进行业务开发。"

## Clarifications

### Session 2025-11-17

- Q: 当用户系统主题设置发生变化时，应用主题是否需要自动跟随？ → A: 提供选项让用户选择是否自动跟随系统主题
- Q: 当用户浏览器不支持本地存储时，主题和语言偏好如何处理？ → A: 显示错误提示并禁用主题/语言切换功能
- Q: 当翻译文件加载失败时，界面如何降级显示？ → A: 显示原始语言文本，同时在语言切换控件旁显示警告图标提示翻译加载失败
- Q: 当主题切换过程中出现样式冲突时，如何保证界面可用性？ → A: 使用CSS自定义属性和事务性切换，确保要么完全切换成功，要么回退到原状态

## User Scenarios & Testing _(mandatory)_

### User Story 1 - 清晰的首页展示 (Priority: P1)

用户打开应用程序时，看到一个简洁美观的首页，清晰展示项目介绍信息，让用户能够快速了解项目的核心功能和价值主张。

**Why this priority**: 这是用户与项目的第一次接触，必须提供良好的第一印象和清晰的项目定位，帮助用户理解这是什么项目以及如何开始使用。

**Independent Test**: 可以通过启动应用并验证首页内容完整性来独立测试 - 确保页面加载正常、内容显示正确、所有关键信息（项目标题、描述、特性列表）都可见。

**Acceptance Scenarios**:

1. **Given** 用户首次打开应用, **When** 应用加载完成, **Then** 用户看到一个设计精美的首页，包含项目名称、简短描述和主要特性介绍
2. **Given** 用户查看首页, **When** 页面完全加载, **Then** 所有文本内容正确显示，布局响应式适配不同屏幕尺寸
3. **Given** 用户浏览首页内容, **When** 用户滚动页面, **Then** 页面滚动流畅，没有布局错位或重叠问题

---

### User Story 2 - 主题切换功能 (Priority: P1)

用户可以通过界面上的主题切换按钮在亮色模式和暗色模式之间切换，应用会记住用户的选择并在下次访问时自动应用。

**Why this priority**: 主题切换是现代桌面应用的基础功能，直接影响用户体验和可访问性，满足不同用户的视觉偏好和使用环境需求。

**Independent Test**: 可以通过点击主题切换按钮并验证界面样式变化来独立测试 - 确保按钮功能正常、主题正确切换、设置能够持久化保存。

**Acceptance Scenarios**:

1. **Given** 用户在亮色模式下, **When** 点击主题切换按钮, **Then** 应用界面立即切换到暗色模式，所有组件样式相应更新
2. **Given** 用户在暗色模式下, **When** 点击主题切换按钮, **Then** 应用界面切换回亮色模式，文本和背景颜色对比度保持良好
3. **Given** 用户设置了特定主题, **When** 重新启动应用, **Then** 应用自动恢复上次选择的主题模式
4. **Given** 用户快速连续点击主题切换按钮, **When** 点击操作完成, **Then** 主题状态保持一致，没有出现样式冲突或加载错误

---

### User Story 3 - 语言切换功能 (Priority: P1)

用户可以通过语言选择器在中文和英文之间切换界面语言，所有界面文本都会相应更新，语言偏好会被保存。

**Why this priority**: 国际化支持使模板项目能够服务于全球用户，是专业级应用的基础要求，也是用户友好的重要体现。

**Independent Test**: 可以通过选择不同语言并验证界面文本变化来独立测试 - 确保语言切换正常工作、文本翻译准确、设置能够持久化保存。

**Acceptance Scenarios**:

1. **Given** 用户使用中文界面, **When** 选择英文语言选项, **Then** 所有界面文本立即切换为英文，包括标题、按钮和描述内容
2. **Given** 用户使用英文界面, **When** 选择中文语言选项, **Then** 所有界面文本切换回中文，排版和显示效果良好
3. **Given** 用户设置了特定语言, **When** 重新启动应用, **Then** 应用自动使用上次选择的语言显示界面
4. **Given** 用户切换语言时, **When** 翻译加载过程中, **Then** 界面保持稳定，不会出现未翻译文本混用的情况

---

### User Story 4 - 移除多余页面和功能 (Priority: P2)

用户界面中不再包含dashboard、settings、users等多余的页面和功能，只保留核心的首页展示和基础配置功能。

**Why this priority**: 简化的界面让用户能够专注于核心功能，减少学习成本和界面干扰，为业务开发提供干净的起点。

**Independent Test**: 可以通过验证应用中不存在多余页面和功能来独立测试 - 确保路由简化、导航栏只显示必要项、相关文件已清理。

**Acceptance Scenarios**:

1. **Given** 用户打开应用, **When** 查看导航界面, **Then** 只看到首页相关的导航选项，没有dashboard、settings、users等多余页面链接
2. **Given** 用户尝试访问多余页面URL, **When** 输入已删除页面的路径, **Then** 系统自动重定向到首页或显示友好的404页面
3. **Given** 开发者查看项目结构, **When** 检查代码文件, **Then** 多余页面的组件文件和路由配置已被安全移除，不影响应用稳定性

---

### Edge Cases

- 当用户启用"自动跟随系统主题"选项时，应用会在系统主题变化时自动切换，同时保留手动覆盖的选项
- 当用户浏览器不支持本地存储时，显示友好的错误提示并临时禁用主题/语言切换功能，使用默认设置
- 当翻译文件加载失败时，显示原始语言文本，同时在语言切换控件旁显示警告图标提示翻译加载失败
- 当主题切换过程中出现样式冲突时，使用CSS自定义属性和事务性切换，确保要么完全切换成功，要么回退到原状态

## Requirements _(mandatory)_

### Functional Requirements

- **FR-001**: 系统必须提供设计精美的首页，包含项目名称、描述和主要特性介绍
- **FR-002**: 系统必须支持亮色/暗色主题切换功能，主题状态能够持久化保存，并提供"自动跟随系统主题"选项。自动跟随功能必须：
  - 使用 `prefers-color-scheme` 媒体查询检测系统主题
  - 在系统主题变化时实时切换应用主题
  - 保留用户手动覆盖选项，允许临时禁用自动跟随
  - 在Tauri桌面环境中使用原生API检测系统主题变化
- **FR-003**: 系统必须支持中文/英文语言切换功能，语言偏好能够持久化保存
- **FR-004**: 系统必须移除以下多余页面和功能，只保留首页和必要的基础功能：
  - 移除的页面：`/dashboard`, `/settings`, `/users` 及其相关组件
  - 移除的组件：`dashboard-page.tsx`, `settings-page.tsx`, `users-page.tsx`
  - 保留的功能：首页展示、主题切换、语言切换、错误处理
  - 重定向规则：访问已移除页面时自动重定向到首页
  - 代码清理：移除相关的路由配置、导航链接和依赖项
- **FR-005**: 系统必须确保所有界面在不同主题下都具有良好的可读性和视觉效果，使用CSS自定义属性实现事务性主题切换
- **FR-006**: 系统必须在语言切换时保持界面稳定性，避免部分翻译的混乱状态，翻译加载失败时显示警告并降级到原始语言
- **FR-007**: 系统必须确保首页布局在不同屏幕尺寸下都能正确显示（响应式设计）
- **FR-008**: 系统必须为主题和语言切换提供直观易用的用户界面控件，当本地存储不可用时显示错误提示并禁用相关功能
- **FR-009**: 系统必须在移除多余功能时保持代码结构的整洁性和可维护性
- **FR-010**: 系统必须为后续业务开发提供清晰的代码结构和扩展点

### Key Entities _(include if feature involves data)_

- **用户偏好设置**: 存储用户选择的主题模式和界面语言，支持本地持久化
- **多语言资源**: 包含中文和英文版本的界面文本翻译，支持动态切换
- **主题配置**: 定义亮色和暗色模式的颜色方案和样式变量

## Success Criteria _(mandatory)_

### Measurable Outcomes

- **SC-001**: 用户可以在3秒内完成主题切换操作，界面立即响应变化
- **SC-002**: 用户可以在5秒内完成语言切换操作，所有文本正确翻译显示
- **SC-003**: 应用启动时间不超过2秒，首页内容完整加载
- **SC-004**: 界面在不同主题下的文本对比度符合WCAG 2.1 AA级可访问性标准
- **SC-005**: 项目代码行数减少至少40%，移除所有非必要的页面和功能代码
- **SC-006**: 100%的界面文本都支持中英文双语切换，无遗漏翻译
- **SC-007**: 用户重启应用后，主题和语言设置100%正确恢复

### Compliance Criteria _(项目宪法要求)_

- **CC-001**: 双项目都必须通过 `pnpm lint` 和 `pnpm format:check` 验证
- **CC-002**: 实施前必须使用 Context7 MCP 研究所有相关库文档
- **CC-003**: Web 相关更改后必须使用 Playwright MCP 进行验证测试
- **CC-004**: 主项目和模板项目都必须包含完整的 MCP 服务器配置（Context7 + Playwright）
- **CC-005**: 主项目必须使用 Node.js CLI 技术栈，模板项目使用 TypeScript + Next.js 技术栈
- **CC-006**: 两个项目都必须配置 ESLint + Prettier + husky hooks 代码规范工具
- **CC-007**: 主项目功能必须专注于 npx CLI 工具，模板项目专注于 Tauri 2 + Next.js 应用模板
- **CC-008**: 必须遵循 SDD (Specification Driven Development) 和测试驱动开发
- **CC-009**: 主项目开发必须在根目录进行，模板项目开发必须在 `template/` 目录内进行
- **CC-010**: 模板项目技术栈必须符合 Tauri 2.0 + React 19 + Next.js 16.0.3 + Tailwind CSS + DaisyUI 5
- **CC-011**: 模板项目必须配置 Next.js 静态导出 (`output: 'export'`) 支持 Tauri 桌面应用
- **CC-012**: 所有文档、代码注释、用户交互和技术讨论必须使用中文（专业术语和源代码除外）
